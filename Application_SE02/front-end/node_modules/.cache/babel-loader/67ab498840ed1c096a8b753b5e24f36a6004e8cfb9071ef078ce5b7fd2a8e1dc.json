{"ast":null,"code":"import _slicedToArray from\"/Users/jpl-st-spring2021/Desktop/NathanUnitTests01May/csc648-spring23-04-team02/Application_SE02/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import SelectGenre from\"./select_genre\";import SelectYear from\"./select_year\";import SelectRuntime from\"./select_runtime\";import SelectAge from\"./select_age\";import Results from\"./results\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SelectionSequence(){var _useState=useState(\"genre\"),_useState2=_slicedToArray(_useState,2),current=_useState2[0],set_current=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),genre=_useState4[0],set_genre=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),year=_useState6[0],set_year=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),runtime=_useState8[0],set_runtime=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),age=_useState10[0],set_age=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),results=_useState12[0],set_results=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),error=_useState14[0],set_error=_useState14[1];var generate_results=function generate_results(){var _document$cookie$matc;var preferences={genre:genre,year:year,runtime:runtime,age:age};console.log(preferences);fetch(\"api/get_movie_recommendations/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \".concat(localStorage.getItem(\"token\")),// Include the CSRF token in the headers\n\"X-CSRFToken\":((_document$cookie$matc=document.cookie.match(\"(^|;)\\\\s*\"+\"csrftoken\"+\"\\\\s*=\\\\s*([^;]+)\"))===null||_document$cookie$matc===void 0?void 0:_document$cookie$matc.pop())||\"\"},body:JSON.stringify(preferences)}).then(function(res){return res.json();}).then(function(data){set_results(data);}).catch(function(err){console.log(err.message);set_error(err);});set_current(\"results\");};return/*#__PURE__*/_jsxs(\"div\",{children:[current===\"genre\"&&/*#__PURE__*/_jsx(SelectGenre,{element:genre,set_element:set_genre}),current===\"year\"&&/*#__PURE__*/_jsx(SelectYear,{element:year,set_element:set_year}),current===\"runtime\"&&/*#__PURE__*/_jsx(SelectRuntime,{element:runtime,set_element:set_runtime}),current===\"age\"&&/*#__PURE__*/_jsx(SelectAge,{element:age,set_element:set_age}),current===\"results\"&&/*#__PURE__*/_jsx(Results,{data:results,error:error}),genre.length!=0&&current===\"genre\"&&/*#__PURE__*/_jsx(\"button\",{className:\"next-button\",onClick:function onClick(){set_current(\"year\");},children:\"Next\"}),year.length!=0&&current===\"year\"&&/*#__PURE__*/_jsx(\"button\",{className:\"next-button\",onClick:function onClick(){set_current(\"runtime\");},children:\"Next\"}),runtime.length!=0&&current===\"runtime\"&&/*#__PURE__*/_jsx(\"button\",{className:\"next-button\",onClick:function onClick(){set_current(\"age\");},children:\"Next\"}),age.length!=0&&current===\"age\"&&/*#__PURE__*/_jsx(\"button\",{className:\"next-button\",onClick:function onClick(){generate_results();},children:\"Generate Recommendations\"}),/*#__PURE__*/_jsx(\"p\",{className:\"test\",children:genre}),/*#__PURE__*/_jsx(\"p\",{className:\"test\",children:year}),/*#__PURE__*/_jsx(\"p\",{className:\"test\",children:runtime}),/*#__PURE__*/_jsx(\"p\",{className:\"test\",children:age})]});}export default SelectionSequence;","map":{"version":3,"names":["useState","SelectGenre","SelectYear","SelectRuntime","SelectAge","Results","jsx","_jsx","jsxs","_jsxs","SelectionSequence","_useState","_useState2","_slicedToArray","current","set_current","_useState3","_useState4","genre","set_genre","_useState5","_useState6","year","set_year","_useState7","_useState8","runtime","set_runtime","_useState9","_useState10","age","set_age","_useState11","_useState12","results","set_results","_useState13","_useState14","error","set_error","generate_results","_document$cookie$matc","preferences","console","log","fetch","method","headers","Authorization","concat","localStorage","getItem","document","cookie","match","pop","body","JSON","stringify","then","res","json","data","catch","err","message","children","element","set_element","length","className","onClick"],"sources":["/Users/jpl-st-spring2021/Desktop/NathanUnitTests01May/csc648-spring23-04-team02/Application_SE02/front-end/src/recommend.js"],"sourcesContent":["import { useState } from \"react\";\nimport SelectGenre from \"./select_genre\";\nimport SelectYear from \"./select_year\";\nimport SelectRuntime from \"./select_runtime\";\nimport SelectAge from \"./select_age\";\nimport Results from \"./results\";\n\nfunction SelectionSequence() {\n  const [current, set_current] = useState(\"genre\");\n\n  const [genre, set_genre] = useState([]);\n  const [year, set_year] = useState([]);\n  const [runtime, set_runtime] = useState([]);\n  const [age, set_age] = useState([]);\n\n  const [results, set_results] = useState([]);\n  const [error, set_error] = useState(\"\");\n\n  const generate_results = () => {\n    const preferences = { genre, year, runtime, age };\n    console.log(preferences);\n\n    fetch(\"api/get_movie_recommendations/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Token ${localStorage.getItem(\"token\")}`,\n        // Include the CSRF token in the headers\n        \"X-CSRFToken\":\n          document.cookie\n            .match(\"(^|;)\\\\s*\" + \"csrftoken\" + \"\\\\s*=\\\\s*([^;]+)\")\n            ?.pop() || \"\",\n      },\n      body: JSON.stringify(preferences),\n    })\n      .then((res) => {\n        return res.json();\n      })\n      .then((data) => {\n        set_results(data);\n      })\n      .catch((err) => {\n        console.log(err.message);\n        set_error(err);\n      });\n    set_current(\"results\");\n  };\n\n  return (\n    <div>\n      {/* Selection Pages */}\n      {current === \"genre\" && (\n        <SelectGenre element={genre} set_element={set_genre} />\n      )}\n      {current === \"year\" && (\n        <SelectYear element={year} set_element={set_year} />\n      )}\n      {current === \"runtime\" && (\n        <SelectRuntime element={runtime} set_element={set_runtime} />\n      )}\n      {current === \"age\" && <SelectAge element={age} set_element={set_age} />}\n\n      {current === \"results\" && <Results data={results} error={error} />}\n\n      {/* Next Buttons */}\n      {genre.length != 0 && current === \"genre\" && (\n        <button\n          className=\"next-button\"\n          onClick={() => {\n            set_current(\"year\");\n          }}\n        >\n          Next\n        </button>\n      )}\n      {year.length != 0 && current === \"year\" && (\n        <button\n          className=\"next-button\"\n          onClick={() => {\n            set_current(\"runtime\");\n          }}\n        >\n          Next\n        </button>\n      )}\n      {runtime.length != 0 && current === \"runtime\" && (\n        <button\n          className=\"next-button\"\n          onClick={() => {\n            set_current(\"age\");\n          }}\n        >\n          Next\n        </button>\n      )}\n      {age.length != 0 && current === \"age\" && (\n        <button\n          className=\"next-button\"\n          onClick={() => {\n            generate_results();\n          }}\n        >\n          Generate Recommendations\n        </button>\n      )}\n\n      {/* Testing... */}\n\n      <p className=\"test\">{genre}</p>\n      <p className=\"test\">{year}</p>\n      <p className=\"test\">{runtime}</p>\n      <p className=\"test\">{age}</p>\n    </div>\n  );\n}\n\nexport default SelectionSequence;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}